<!DOCTYPE html>
<html>
  <head>
    <script>
      const Module = {};
      const path = `./target/wasm32-unknown-unknown/release/vanilla_rust_wasm.wasm?${Date.now()}`;
      WebAssembly.instantiateStreaming(fetch(path), {})
        .then(({ instance, module }) => {
          const input = 10;
          console.log({
            add: instance.exports.add(2, 8),
            fib: instance.exports.fib(input),
            fibOri: input
          });

          const value = instance.exports.get_char();
          const byte = new Uint8Array([value]);
          const decoder = new TextDecoder('utf-8');
          console.log({
            char: decoder.decode(byte),
            charOri: value
          });

          const pointer = instance.exports.get_i32_array();
          const heap = new Int32Array(instance.exports.memory.buffer, pointer);
          console.log(heap[0], heap[1], heap[2])
        });
    </script>
  </head>
</html>